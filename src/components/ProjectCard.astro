---
import type { CollectionEntry } from "astro:content";
import Link from "@components/Link.astro";
import { CARD_COLOR_CLASSES } from "@consts";

interface Props {
  entry: CollectionEntry<"projects">;
  index?: number;
}

const { entry, index = 0 } = Astro.props;

const color = CARD_COLOR_CLASSES[index % CARD_COLOR_CLASSES.length];
const hasLinks =
  entry.data.repoURL || entry.data.demoURL || entry.data.featured;
---

<div
  class:list={[
    "py-3 px-4 rounded-lg border border-tn-light-surface/60 dark:border-tn-dark-surface/60 border-l-[3px] transition-all duration-300 ease-in-out",
    color,
  ]}
>
  <div class="font-semibold">
    {entry.data.title}
  </div>
  <div class="text-sm">
    {entry.data.description}
  </div>
  {
    hasLinks && (
      <nav class="flex gap-1 mt-1.5 text-sm">
        {entry.data.repoURL && (
          <Link href={entry.data.repoURL} external>
            source
          </Link>
        )}
        {entry.data.repoURL && entry.data.demoURL && <span>/</span>}
        {entry.data.demoURL && (
          <Link href={entry.data.demoURL} external>
            demo
          </Link>
        )}
        {(entry.data.repoURL || entry.data.demoURL) && entry.data.featured && (
          <span>/</span>
        )}
        {entry.data.featured && (
          <Link href={`/projects/${entry.slug}`}>read more &rarr;</Link>
        )}
      </nav>
    )
  }
</div>
