@import "tailwindcss";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* Fonts */
  --font-sans: "Inter", ui-sans-serif, system-ui, -apple-system, sans-serif;
  --font-mono: "Monaspace Neon", ui-monospace, SFMono-Regular, monospace;

  /* Tokyo Night (dark) */
  --color-tn-dark-bg: #1a1b26;
  --color-tn-dark-bg-alt: #16161e;
  --color-tn-dark-surface: #292e42;
  --color-tn-dark-fg: #c0caf5;
  --color-tn-dark-fg-muted: #a9b1d6;
  --color-tn-dark-accent: #7aa2f7;
  --color-tn-dark-accent-hover: #7dcfff;
  --color-tn-dark-warm: #bb9af7;
  --color-tn-dark-green: #9ece6a;
  --color-tn-dark-red: #f7768e;
  --color-tn-dark-orange: #ff9e64;
  --color-tn-dark-yellow: #e0af68;
  --color-tn-dark-cyan: #7dcfff;

  /* Tokyo Night Day (light) */
  --color-tn-light-bg: #e1e2e7;
  --color-tn-light-bg-alt: #d0d5e3;
  --color-tn-light-surface: #c4c8da;
  --color-tn-light-fg: #3760bf;
  --color-tn-light-fg-muted: #6172b0;
  --color-tn-light-accent: #2e7de9;
  --color-tn-light-accent-hover: #007197;
  --color-tn-light-warm: #9854f1;
  --color-tn-light-green: #587539;
  --color-tn-light-red: #f52a65;
  --color-tn-light-orange: #b15c00;
  --color-tn-light-yellow: #8c6c3e;
  --color-tn-light-cyan: #007197;
}

/* ---------------------------------------------------------------------------
 * Color scheme overrides
 *
 * Tokyo Night is the default (defined in @theme above).
 * Override --color-tn-* variables per scheme so all existing
 * Tailwind utilities work without template changes.
 * --------------------------------------------------------------------------- */

html[data-color-scheme="gruvbox"] {
  --color-tn-dark-bg: #282828;
  --color-tn-dark-bg-alt: #1d2021;
  --color-tn-dark-surface: #3c3836;
  --color-tn-dark-fg: #ebdbb2;
  --color-tn-dark-fg-muted: #a89984;
  --color-tn-dark-accent: #83a598;
  --color-tn-dark-accent-hover: #8ec07c;
  --color-tn-dark-warm: #d3869b;
  --color-tn-dark-green: #b8bb26;
  --color-tn-dark-red: #fb4934;
  --color-tn-dark-orange: #fe8019;
  --color-tn-dark-yellow: #fabd2f;
  --color-tn-dark-cyan: #83a598;

  --color-tn-light-bg: #fbf1c7;
  --color-tn-light-bg-alt: #f2e5bc;
  --color-tn-light-surface: #d5c4a1;
  --color-tn-light-fg: #3c3836;
  --color-tn-light-fg-muted: #665c54;
  --color-tn-light-accent: #076678;
  --color-tn-light-accent-hover: #427b58;
  --color-tn-light-warm: #8f3f71;
  --color-tn-light-green: #79740e;
  --color-tn-light-red: #9d0006;
  --color-tn-light-orange: #af3a03;
  --color-tn-light-yellow: #b57614;
  --color-tn-light-cyan: #076678;
}

html[data-color-scheme="nord"] {
  --color-tn-dark-bg: #2e3440;
  --color-tn-dark-bg-alt: #242933;
  --color-tn-dark-surface: #3b4252;
  --color-tn-dark-fg: #eceff4;
  --color-tn-dark-fg-muted: #d8dee9;
  --color-tn-dark-accent: #88c0d0;
  --color-tn-dark-accent-hover: #81a1c1;
  --color-tn-dark-warm: #b48ead;
  --color-tn-dark-green: #a3be8c;
  --color-tn-dark-red: #bf616a;
  --color-tn-dark-orange: #d08770;
  --color-tn-dark-yellow: #ebcb8b;
  --color-tn-dark-cyan: #8fbcbb;

  --color-tn-light-bg: #eceff4;
  --color-tn-light-bg-alt: #e5e9f0;
  --color-tn-light-surface: #d8dee9;
  --color-tn-light-fg: #2e3440;
  --color-tn-light-fg-muted: #4c566a;
  --color-tn-light-accent: #5e81ac;
  --color-tn-light-accent-hover: #81a1c1;
  --color-tn-light-warm: #b48ead;
  --color-tn-light-green: #a3be8c;
  --color-tn-light-red: #bf616a;
  --color-tn-light-orange: #d08770;
  --color-tn-light-yellow: #ebcb8b;
  --color-tn-light-cyan: #8fbcbb;
}

html[data-color-scheme="nightfox"] {
  --color-tn-dark-bg: #192330;
  --color-tn-dark-bg-alt: #131a24;
  --color-tn-dark-surface: #29394f;
  --color-tn-dark-fg: #cdcecf;
  --color-tn-dark-fg-muted: #71839b;
  --color-tn-dark-accent: #719cd6;
  --color-tn-dark-accent-hover: #63cdcf;
  --color-tn-dark-warm: #9d79d6;
  --color-tn-dark-green: #81b29a;
  --color-tn-dark-red: #c94f6d;
  --color-tn-dark-orange: #f4a261;
  --color-tn-dark-yellow: #dbc074;
  --color-tn-dark-cyan: #63cdcf;

  --color-tn-light-bg: #f6f2ee;
  --color-tn-light-bg-alt: #e4dcd4;
  --color-tn-light-surface: #d3c7bb;
  --color-tn-light-fg: #3d2b5a;
  --color-tn-light-fg-muted: #824d5b;
  --color-tn-light-accent: #2848a9;
  --color-tn-light-accent-hover: #287980;
  --color-tn-light-warm: #6e33ce;
  --color-tn-light-green: #396847;
  --color-tn-light-red: #a5222f;
  --color-tn-light-orange: #955f61;
  --color-tn-light-yellow: #ac5402;
  --color-tn-light-cyan: #287980;
}

html[data-color-scheme="rose-pine"] {
  --color-tn-dark-bg: #232136;
  --color-tn-dark-bg-alt: #2a273f;
  --color-tn-dark-surface: #393552;
  --color-tn-dark-fg: #e0def4;
  --color-tn-dark-fg-muted: #908caa;
  --color-tn-dark-accent: #c4a7e7;
  --color-tn-dark-accent-hover: #9ccfd8;
  --color-tn-dark-warm: #c4a7e7;
  --color-tn-dark-green: #3e8fb0;
  --color-tn-dark-red: #eb6f92;
  --color-tn-dark-orange: #ea9a97;
  --color-tn-dark-yellow: #f6c177;
  --color-tn-dark-cyan: #9ccfd8;

  --color-tn-light-bg: #faf4ed;
  --color-tn-light-bg-alt: #fffaf3;
  --color-tn-light-surface: #f2e9e1;
  --color-tn-light-fg: #575279;
  --color-tn-light-fg-muted: #9893a5;
  --color-tn-light-accent: #907aa9;
  --color-tn-light-accent-hover: #56949f;
  --color-tn-light-warm: #907aa9;
  --color-tn-light-green: #286983;
  --color-tn-light-red: #b4637a;
  --color-tn-light-orange: #d7827e;
  --color-tn-light-yellow: #ea9d34;
  --color-tn-light-cyan: #56949f;
}

html[data-color-scheme="catppuccin-frappe"] {
  /* Dark: Catppuccin Frappé — catppuccin.com */
  --color-tn-dark-bg: #303446;
  --color-tn-dark-bg-alt: #292c3c;
  --color-tn-dark-surface: #414559;
  --color-tn-dark-fg: #c6d0f5;
  --color-tn-dark-fg-muted: #a5adce;
  --color-tn-dark-accent: #8caaee;
  --color-tn-dark-accent-hover: #99d1db;
  --color-tn-dark-warm: #ca9ee6;
  --color-tn-dark-green: #a6d189;
  --color-tn-dark-red: #e78284;
  --color-tn-dark-orange: #ef9f76;
  --color-tn-dark-yellow: #e5c890;
  --color-tn-dark-cyan: #81c8be;

  /* Light: Catppuccin Latte — catppuccin.com */
  --color-tn-light-bg: #eff1f5;
  --color-tn-light-bg-alt: #e6e9ef;
  --color-tn-light-surface: #ccd0da;
  --color-tn-light-fg: #4c4f69;
  --color-tn-light-fg-muted: #6c6f85;
  --color-tn-light-accent: #1e66f5;
  --color-tn-light-accent-hover: #04a5e5;
  --color-tn-light-warm: #8839ef;
  --color-tn-light-green: #40a02b;
  --color-tn-light-red: #d20f39;
  --color-tn-light-orange: #fe640b;
  --color-tn-light-yellow: #df8e1d;
  --color-tn-light-cyan: #179299;
}

html[data-color-scheme="catppuccin-macchiato"] {
  /* Dark: Catppuccin Macchiato — catppuccin.com */
  --color-tn-dark-bg: #24273a;
  --color-tn-dark-bg-alt: #1e2030;
  --color-tn-dark-surface: #363a4f;
  --color-tn-dark-fg: #cad3f5;
  --color-tn-dark-fg-muted: #a5adcb;
  --color-tn-dark-accent: #8aadf4;
  --color-tn-dark-accent-hover: #91d7e3;
  --color-tn-dark-warm: #c6a0f6;
  --color-tn-dark-green: #a6da95;
  --color-tn-dark-red: #ed8796;
  --color-tn-dark-orange: #f5a97f;
  --color-tn-dark-yellow: #eed49f;
  --color-tn-dark-cyan: #8bd5ca;

  /* Light: Catppuccin Latte — catppuccin.com */
  --color-tn-light-bg: #eff1f5;
  --color-tn-light-bg-alt: #e6e9ef;
  --color-tn-light-surface: #ccd0da;
  --color-tn-light-fg: #4c4f69;
  --color-tn-light-fg-muted: #6c6f85;
  --color-tn-light-accent: #1e66f5;
  --color-tn-light-accent-hover: #04a5e5;
  --color-tn-light-warm: #8839ef;
  --color-tn-light-green: #40a02b;
  --color-tn-light-red: #d20f39;
  --color-tn-light-orange: #fe640b;
  --color-tn-light-yellow: #df8e1d;
  --color-tn-light-cyan: #179299;
}

html[data-color-scheme="catppuccin-mocha"] {
  /* Dark: Catppuccin Mocha — catppuccin.com */
  --color-tn-dark-bg: #1e1e2e;
  --color-tn-dark-bg-alt: #181825;
  --color-tn-dark-surface: #313244;
  --color-tn-dark-fg: #cdd6f4;
  --color-tn-dark-fg-muted: #a6adc8;
  --color-tn-dark-accent: #89b4fa;
  --color-tn-dark-accent-hover: #89dceb;
  --color-tn-dark-warm: #cba6f7;
  --color-tn-dark-green: #a6e3a1;
  --color-tn-dark-red: #f38ba8;
  --color-tn-dark-orange: #fab387;
  --color-tn-dark-yellow: #f9e2af;
  --color-tn-dark-cyan: #94e2d5;

  /* Light: Catppuccin Latte — catppuccin.com */
  --color-tn-light-bg: #eff1f5;
  --color-tn-light-bg-alt: #e6e9ef;
  --color-tn-light-surface: #ccd0da;
  --color-tn-light-fg: #4c4f69;
  --color-tn-light-fg-muted: #6c6f85;
  --color-tn-light-accent: #1e66f5;
  --color-tn-light-accent-hover: #04a5e5;
  --color-tn-light-warm: #8839ef;
  --color-tn-light-green: #40a02b;
  --color-tn-light-red: #d20f39;
  --color-tn-light-orange: #fe640b;
  --color-tn-light-yellow: #df8e1d;
  --color-tn-light-cyan: #179299;
}

html {
  overflow-y: scroll;
  color-scheme: light;
}

html.dark {
  color-scheme: dark;
}

/* Theme-adaptive palette — used by typewriter gradients */
:root {
  --palette-0: var(--color-tn-light-accent);
  --palette-1: var(--color-tn-light-warm);
  --palette-2: var(--color-tn-light-green);
  --palette-3: var(--color-tn-light-orange);
  --palette-4: var(--color-tn-light-red);
  --palette-5: var(--color-tn-light-cyan);
  --palette-6: var(--color-tn-light-yellow);
}

.dark {
  --palette-0: var(--color-tn-dark-accent);
  --palette-1: var(--color-tn-dark-warm);
  --palette-2: var(--color-tn-dark-green);
  --palette-3: var(--color-tn-dark-orange);
  --palette-4: var(--color-tn-dark-red);
  --palette-5: var(--color-tn-dark-cyan);
  --palette-6: var(--color-tn-dark-yellow);
}

/* Gradient text effect — used by typewriter components */
.typewriter-gradient {
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  background-size: 200% 200%;
  animation: gradient-shift 4s ease infinite;
}

@keyframes gradient-shift {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

/* Greeting colors and gradients — theme-adaptive for typewriter */
:root {
  --greeting-color-0: var(--color-tn-light-warm);
  --greeting-color-1: var(--color-tn-light-accent);
  --greeting-color-2: var(--color-tn-light-green);
  --greeting-color-3: var(--color-tn-light-orange);
  --greeting-color-4: var(--color-tn-light-red);
  --greeting-color-5: var(--color-tn-light-cyan);
  --greeting-grad-0: linear-gradient(
    135deg,
    var(--color-tn-light-warm),
    var(--color-tn-light-green)
  );
  --greeting-grad-1: linear-gradient(
    135deg,
    var(--color-tn-light-accent),
    var(--color-tn-light-orange)
  );
  --greeting-grad-2: linear-gradient(
    135deg,
    var(--color-tn-light-green),
    var(--color-tn-light-warm)
  );
  --greeting-grad-3: linear-gradient(
    135deg,
    var(--color-tn-light-orange),
    var(--color-tn-light-cyan)
  );
  --greeting-grad-4: linear-gradient(
    135deg,
    var(--color-tn-light-red),
    var(--color-tn-light-accent)
  );
  --greeting-grad-5: linear-gradient(
    135deg,
    var(--color-tn-light-cyan),
    var(--color-tn-light-red)
  );
}

.dark {
  --greeting-color-0: var(--color-tn-dark-warm);
  --greeting-color-1: var(--color-tn-dark-accent);
  --greeting-color-2: var(--color-tn-dark-green);
  --greeting-color-3: var(--color-tn-dark-orange);
  --greeting-color-4: var(--color-tn-dark-red);
  --greeting-color-5: var(--color-tn-dark-cyan);
  --greeting-grad-0: linear-gradient(
    135deg,
    var(--color-tn-dark-warm),
    var(--color-tn-dark-green)
  );
  --greeting-grad-1: linear-gradient(
    135deg,
    var(--color-tn-dark-accent),
    var(--color-tn-dark-orange)
  );
  --greeting-grad-2: linear-gradient(
    135deg,
    var(--color-tn-dark-green),
    var(--color-tn-dark-warm)
  );
  --greeting-grad-3: linear-gradient(
    135deg,
    var(--color-tn-dark-orange),
    var(--color-tn-dark-cyan)
  );
  --greeting-grad-4: linear-gradient(
    135deg,
    var(--color-tn-dark-red),
    var(--color-tn-dark-accent)
  );
  --greeting-grad-5: linear-gradient(
    135deg,
    var(--color-tn-dark-cyan),
    var(--color-tn-dark-red)
  );
}

.greeting-gradient {
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

html,
body {
  @apply size-full;
}

body {
  @apply font-sans antialiased;
  @apply flex flex-col;
  @apply bg-tn-light-bg dark:bg-tn-dark-bg;
  @apply text-tn-light-fg-muted dark:text-tn-dark-fg-muted;
}

/* Subtle film grain texture */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  opacity: 0.04;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
}

header {
  @apply fixed top-0 left-0 right-0 z-50 py-5;
  @apply bg-tn-light-bg dark:bg-tn-dark-bg;
  @apply border-b border-tn-light-surface/60 dark:border-tn-dark-surface/60;
}

main {
  @apply flex-1 pt-28 pb-12 sm:pt-32 sm:pb-16;
}

footer {
  @apply py-8 text-sm;
}

article {
  @apply max-w-full prose dark:prose-invert prose-img:mx-auto prose-img:my-auto;
  @apply prose-headings:font-mono prose-headings:font-semibold;
  @apply prose-headings:text-tn-light-fg prose-headings:dark:text-tn-dark-fg;
}

article a {
  @apply font-sans text-tn-light-accent dark:text-tn-dark-accent underline underline-offset-2;
  @apply decoration-tn-light-accent/30 dark:decoration-tn-dark-accent/30;
  @apply transition-colors duration-300 ease-in-out;
}

article a:hover {
  @apply text-tn-light-accent-hover dark:text-tn-dark-accent-hover;
  @apply decoration-tn-light-accent/50 dark:decoration-tn-dark-accent/50;
}

#footer-message a {
  @apply underline underline-offset-2 decoration-current/30;
  @apply hover:text-tn-light-accent dark:hover:text-tn-dark-accent;
  @apply transition-colors duration-300;
}

.animate {
  @apply opacity-0 translate-y-3;
  @apply transition-all duration-700 ease-out;
}

.animate.show {
  @apply opacity-100 translate-y-0;
}

/* Active nav state — overrides Link component accent color */
.nav-active {
  @apply text-tn-light-fg dark:text-tn-dark-fg;
}

/* Abbreviation unfold — reveals full name on hover (desktop only) */
.unfold-text {
  display: none;
}

@media (hover: hover) {
  .group\/dc:hover .unfold-text,
  .group\/au:hover .unfold-text {
    display: inline;
  }
}

/* Theme picker active state */
.theme-active {
  @apply bg-tn-light-surface/50 dark:bg-tn-dark-surface/50;
}

/* Color scheme picker active state */
.scheme-active {
  @apply bg-tn-light-surface/40 dark:bg-tn-dark-surface/40;
}

/* Typewriter cursor — block cursor matching monospace character width */
.cursor-blink::after {
  content: "";
  display: inline-block;
  width: 1ch;
  height: 1.15em;
  vertical-align: text-bottom;
  background-color: var(--color-tn-light-fg-muted);
  animation: blink 1s step-end infinite;
}

.dark .cursor-blink::after {
  background-color: var(--color-tn-dark-fg-muted);
}

.cursor-typing::after {
  animation: none;
  opacity: 1;
}

@keyframes blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}

/* Skip link — visible only on keyboard focus */
.skip-link {
  @apply absolute -top-full left-4 z-[100] px-4 py-2 rounded-b-lg font-mono text-sm;
  @apply bg-tn-light-accent dark:bg-tn-dark-accent;
  @apply text-tn-light-bg dark:text-tn-dark-bg;
}

.skip-link:focus {
  @apply top-0;
}

/* Keyboard focus indicators */
a:focus-visible,
button:focus-visible,
[role="button"]:focus-visible {
  @apply outline-2 outline-offset-2 outline-tn-light-accent dark:outline-tn-dark-accent;
}

/* Reduced motion — respect user preferences for vestibular disorders */
@media (prefers-reduced-motion: reduce) {
  .animate {
    @apply transition-none opacity-100 translate-y-0;
  }

  .cursor-blink::after {
    animation: none;
    opacity: 1;
  }

  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
